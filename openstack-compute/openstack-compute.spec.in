Summary: OpenStack compute client
Name: openstack-compute
Version: @COMPUTE_VERSION@
Release: @BUILD_NUMBER@
License: ASL 2.0
Group: Applications/System
Source0: openstack-compute-%{version}-%{release}.tar.gz

BuildArch: noarch
BuildRoot: %{_tmppath}/%{name}

%global python_sitelib /usr/lib/python2.6/site-packages

%description

%prep
%setup -q -n openstack-compute-%{version}-%{release}

%build
cd openstack.compute
%{__python} setup.py build
cd ..
cd openstackx
%{__python} setup.py build
cd ..

%install
rm -rf %{buildroot}

cd openstack.compute
%{__python} setup.py install -O1 --root %{buildroot}

cd ../openstackx
%{__python} setup.py install -O1 --root %{buildroot}
cd ..
mkdir -p %{buildroot}/var/lib/nova
mv %{buildroot}%{python_sitelib}/extensions %{buildroot}/var/lib/nova

%clean
rm -rf %{buildroot}

%files
%defattr(-,root,root,-)
%{_bindir}/openstack-compute
/var/lib/nova/extensions
%{python_sitelib}/openstack/compute
%{python_sitelib}/openstack.compute-*.egg-info
%{python_sitelib}/openstack.compute-*-nspkg.pth
%{python_sitelib}/openstackx
%{python_sitelib}/openstackx-*.egg-info
%{python_sitelib}/openstackx-*-nspkg.pth
